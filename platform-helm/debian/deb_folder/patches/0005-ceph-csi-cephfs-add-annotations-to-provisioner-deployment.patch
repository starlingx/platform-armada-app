From 727a0bd641df4e6e750242341a9a5b3223b4347a Mon Sep 17 00:00:00 2001
From: Hediberto Cavalcante da Silva
 <hediberto.cavalcantedasilva@windriver.com>
Date: Wed, 9 Nov 2022 16:21:04 -0300
Subject: [PATCH] ceph-csi-cephfs: add annotations to
 provisioner-deployment.yaml

Signed-off-by: Hediberto Cavalcante da Silva <hediberto.cavalcantedasilva@windriver.com>
---
 charts/ceph-csi-cephfs/templates/provisioner-deployment.yaml | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/charts/ceph-csi-cephfs/templates/provisioner-deployment.yaml b/charts/ceph-csi-cephfs/templates/provisioner-deployment.yaml
index c455b86..91b7042 100644
--- a/charts/ceph-csi-cephfs/templates/provisioner-deployment.yaml
+++ b/charts/ceph-csi-cephfs/templates/provisioner-deployment.yaml
@@ -9,6 +9,9 @@ metadata:
     component: {{ .Values.provisioner.name }}
     release: {{ .Release.Name }}
     heritage: {{ .Release.Service }}
+  annotations:
+    "helm.sh/hook": "post-upgrade, post-install"
+    "helm.sh/hook-delete-policy": "before-hook-creation"
 spec:
   replicas: {{ .Values.provisioner.replicaCount }}
   strategy:
--
2.17.1

