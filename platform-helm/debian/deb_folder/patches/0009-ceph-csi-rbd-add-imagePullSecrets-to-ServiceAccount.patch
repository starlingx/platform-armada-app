From 72e79f8c37dd5509a2cfdd6157ea505f0b15b8d4 Mon Sep 17 00:00:00 2001
From: Hediberto Cavalcante da Silva
 <hediberto.cavalcantedasilva@windriver.com>
Date: Sun, 6 Nov 2022 18:25:44 -0300
Subject: [PATCH] ceph-csi-rbd: add imagePullSecrets to ServiceAccount

Signed-off-by: Hediberto Cavalcante da Silva <hediberto.cavalcantedasilva@windriver.com>
---
 charts/ceph-csi-rbd/templates/nodeplugin-serviceaccount.yaml  | 2 ++
 charts/ceph-csi-rbd/templates/provisioner-serviceaccount.yaml | 2 ++
 2 files changed, 4 insertions(+)

diff --git a/charts/ceph-csi-rbd/templates/nodeplugin-serviceaccount.yaml b/charts/ceph-csi-rbd/templates/nodeplugin-serviceaccount.yaml
index 36e1ee7..30080ad 100644
--- a/charts/ceph-csi-rbd/templates/nodeplugin-serviceaccount.yaml
+++ b/charts/ceph-csi-rbd/templates/nodeplugin-serviceaccount.yaml
@@ -10,4 +10,6 @@ metadata:
     component: {{ .Values.nodeplugin.name }}
     release: {{ .Release.Name }}
     heritage: {{ .Release.Service }}
+imagePullSecrets:
+  - name: default-registry-key
 {{- end -}}
diff --git a/charts/ceph-csi-rbd/templates/provisioner-serviceaccount.yaml b/charts/ceph-csi-rbd/templates/provisioner-serviceaccount.yaml
index 893b43a..cebb2e7 100644
--- a/charts/ceph-csi-rbd/templates/provisioner-serviceaccount.yaml
+++ b/charts/ceph-csi-rbd/templates/provisioner-serviceaccount.yaml
@@ -10,4 +10,6 @@ metadata:
     component: {{ .Values.provisioner.name }}
     release: {{ .Release.Name }}
     heritage: {{ .Release.Service }}
+imagePullSecrets:
+  - name: default-registry-key
 {{- end -}}
--
2.17.1

