From 1b00f927ef2f3a279ede03d8971d0cdc306fd43a Mon Sep 17 00:00:00 2001
From: Hediberto Cavalcante da Silva
 <hediberto.cavalcantedasilva@windriver.com>
Date: Sun, 6 Nov 2022 18:28:54 -0300
Subject: [PATCH] ceph-csi-cephfs: add imagePullSecrets to ServiceAccount

Signed-off-by: Hediberto Cavalcante da Silva <hediberto.cavalcantedasilva@windriver.com>
---
 charts/ceph-csi-cephfs/templates/nodeplugin-serviceaccount.yaml | 2 ++
 .../ceph-csi-cephfs/templates/provisioner-serviceaccount.yaml   | 2 ++
 2 files changed, 4 insertions(+)

diff --git a/charts/ceph-csi-cephfs/templates/nodeplugin-serviceaccount.yaml b/charts/ceph-csi-cephfs/templates/nodeplugin-serviceaccount.yaml
index 5dedaf4..7c93f52 100644
--- a/charts/ceph-csi-cephfs/templates/nodeplugin-serviceaccount.yaml
+++ b/charts/ceph-csi-cephfs/templates/nodeplugin-serviceaccount.yaml
@@ -10,4 +10,6 @@ metadata:
     component: {{ .Values.nodeplugin.name }}
     release: {{ .Release.Name }}
     heritage: {{ .Release.Service }}
+imagePullSecrets:
+  - name: default-registry-key
 {{- end -}}
diff --git a/charts/ceph-csi-cephfs/templates/provisioner-serviceaccount.yaml b/charts/ceph-csi-cephfs/templates/provisioner-serviceaccount.yaml
index c4ba5c1..3d85b0f 100644
--- a/charts/ceph-csi-cephfs/templates/provisioner-serviceaccount.yaml
+++ b/charts/ceph-csi-cephfs/templates/provisioner-serviceaccount.yaml
@@ -10,4 +10,6 @@ metadata:
     component: {{ .Values.provisioner.name }}
     release: {{ .Release.Name }}
     heritage: {{ .Release.Service }}
+imagePullSecrets:
+  - name: default-registry-key
 {{- end -}}
--
2.17.1

